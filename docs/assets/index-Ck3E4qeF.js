import{j as T,r as $,k as V,l as q,o as C,w as i,m as y,h as s,u as v,n as O,D as xe,E as Be,p as I,q as ee,t as j,C as He,F as le,s as te,v as me,x as W,y as K,z as ve,A as F,B as Y,G as Pe,H as Ge,J as Ne}from"./ant-design-vue-DIrly2P_.js";import{P as ze,V as We,A as Je,C as fe,M as Ke,a as Ye,S as Qe,I as Q,b as be,T as ne,E as oe,c as ae,d as se,e as re,f as ie,g as Xe,h as Ze,i as el,j as ll,k as tl,H as nl}from"./icons-C3lPIlGK.js";import"./lodash-C8bPsTRD.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))t(r);new MutationObserver(r=>{for(const c of r)if(c.type==="childList")for(const g of c.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&t(g)}).observe(document,{childList:!0,subtree:!0});function n(r){const c={};return r.integrity&&(c.integrity=r.integrity),r.referrerPolicy&&(c.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?c.credentials="include":r.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function t(r){if(r.ep)return;r.ep=!0;const c=n(r);fetch(r.href,c)}})();const ol=T({__name:"AppSider",props:{collapsed:{type:Boolean}},emits:["update:collapsed","showDonation"],setup(u,{emit:e}){const n=e,t=$(["1"]),r=()=>{window.open("https://kook.vip/8lhssl","_blank")},c=()=>{n("showDonation")},g=w=>{n("update:collapsed",w)};return(w,f)=>{const m=V("a-menu-item"),b=V("a-menu"),_=V("a-layout-sider");return C(),q(_,{collapsed:w.collapsed,trigger:null,collapsible:"","onUpdate:collapsed":g},{default:i(()=>[f[5]||(f[5]=y("div",{class:"logo"},"呆橘过滤器",-1)),s(b,{selectedKeys:t.value,"onUpdate:selectedKeys":f[0]||(f[0]=d=>t.value=d),theme:"dark",mode:"inline"},{default:i(()=>[s(m,{key:"1"},{default:i(()=>[s(v(ze)),f[1]||(f[1]=y("span",null,"过滤器",-1))]),_:1}),s(m,{key:"2"},{default:i(()=>[s(v(We)),f[2]||(f[2]=y("span",null,"视频教程",-1))]),_:1}),s(m,{key:"3",onClick:r},{default:i(()=>[s(v(Je)),f[3]||(f[3]=y("span",null,"加入我们",-1))]),_:1}),s(m,{key:"4",onClick:c},{default:i(()=>[s(v(fe)),f[4]||(f[4]=y("span",null,"赞助",-1))]),_:1})]),_:1},8,["selectedKeys"])]),_:1},8,["collapsed"])}}}),al={class:"header-actions"},sl=T({__name:"AppHeader",props:{collapsed:{type:Boolean}},emits:["update:collapsed","showPreview","exportFilter","showConfigManager"],setup(u,{emit:e}){const n=u,t=e,r=()=>{t("update:collapsed",!n.collapsed)},c=()=>{t("showPreview")},g=()=>{t("exportFilter")},w=()=>{t("showConfigManager")};return(f,m)=>{const b=V("a-button"),_=V("a-button-group"),d=V("a-layout-header");return C(),q(d,{style:{background:"#fff",padding:"10px"}},{default:i(()=>[f.collapsed?(C(),q(v(Ke),{key:0,class:"trigger",onClick:r})):(C(),q(v(Ye),{key:1,class:"trigger",onClick:r})),y("div",al,[s(_,{class:"action-group"},{default:i(()=>[s(b,{type:"primary",onClick:w},{icon:i(()=>[s(v(Qe))]),default:i(()=>[m[0]||(m[0]=O(" 配置管理 "))]),_:1}),s(b,{type:"primary",onClick:g},{icon:i(()=>[s(v(xe))]),default:i(()=>[m[1]||(m[1]=O(" 导出过滤器 "))]),_:1}),s(b,{type:"primary",onClick:c},{icon:i(()=>[s(v(Be))]),default:i(()=>[m[2]||(m[2]=O(" 预览过滤器 "))]),_:1})]),_:1})])]),_:1})}}}),rl=u=>({currency:re,equipment:se,jewel:ae,flask:oe,skillgem:ne,unique:be,normalequipment:Q})[u]||ie,ge=u=>{const e={currency:/chaos|exalted|divine|mirror/i,map:/map|atlas/i,jewel:/jewel|abyss/i,flask:/flask|potion/i,skillGem:/gem|skill/i,unique:/unique|rare/i,equipment:/armor|weapon|shield/i},n={currency:re,map:se,jewel:ae,flask:oe,skillGem:ne,unique:be,equipment:Q};for(const[t,r]of Object.entries(e))if(r.test(u))return n[t];return ie},il={class:"section-header"},ul={class:"section-title"},dl={class:"title-text"},cl={class:"section-actions"},pl={class:"select-all-content"},ml=T({__name:"FilterHeader",props:{type:{},title:{},checkAll:{type:Boolean},indeterminate:{type:Boolean},allSoundsEnabled:{type:Boolean}},emits:["checkAllChange","toggleAllSounds"],setup(u){return(e,n)=>{const t=V("a-checkbox"),r=V("a-button");return C(),I("div",il,[y("div",ul,[y("span",dl,[(C(),q(ee(v(rl)(e.type)),{class:"title-icon"})),O(" "+j(e.title),1)])]),y("div",cl,[s(t,{class:"select-all",indeterminate:e.indeterminate,checked:e.checkAll,onChange:n[0]||(n[0]=c=>e.$emit("checkAllChange",c.target.checked))},{default:i(()=>[y("span",pl,[s(v(He),{class:"select-all-icon"}),n[2]||(n[2]=O(" 全选 "))])]),_:1},8,["indeterminate","checked"]),s(r,{class:"sound-toggle-btn",size:"small",type:e.allSoundsEnabled?"primary":"default",onClick:n[1]||(n[1]=c=>e.$emit("toggleAllSounds",!e.allSoundsEnabled))},{icon:i(()=>[e.allSoundsEnabled?(C(),q(v(Xe),{key:0})):(C(),q(v(Ze),{key:1}))]),default:i(()=>[O(" "+j(e.allSoundsEnabled?"关闭所有音效":"开启所有音效"),1)]),_:1},8,["type"])])])}}}),vl={class:"checkbox-grid"},fl={class:"checkbox-content"},bl=T({__name:"FilterGrid",props:{options:{},checkedList:{}},emits:["change"],setup(u,{emit:e}){const n=u,t=e,r=$(new Set),c=(b,_)=>`${b}-${_}`,g=(b,_)=>!!n.checkedList.find(d=>d.value===b&&d.label===_),w=(b,_)=>r.value.has(c(b,_)),f=()=>!1,m=async(b,_)=>{const d=b.target.checked,l=c(_.value,_.label);r.value.add(l);try{t("change",d,_.value,_.label)}finally{setTimeout(()=>{r.value.delete(l)},300)}};return(b,_)=>{const d=V("a-checkbox");return C(),I("div",vl,[(C(!0),I(le,null,te(b.options,l=>(C(),I("div",{key:`${l.value}-${l.label}`,class:me(["checkbox-item",{checked:g(l.value,l.label),loading:w(l.value,l.label),disabled:f()}])},[s(d,{value:l.value,checked:g(l.value,l.label),disabled:f(),onChange:p=>m(p,l)},{default:i(()=>[y("span",fl,[(C(),q(ee(v(ge)(l.value)),{class:"option-icon"})),O(" "+j(l.label),1)])]),_:2},1032,["value","checked","disabled","onChange"])],2))),128))])}}}),gl={class:"settings-grid"},yl={class:"option-label"},_l={class:"settings-content"},kl={class:"sound-control"},hl={class:"sound-status"},Cl={class:"color-pickers"},wl={class:"color-picker"},Sl={class:"color-picker"},Vl=T({__name:"FilterSettings",props:{checkedList:{},options:{}},emits:["updateSound","updateColor","updateBgColor"],setup(u,{emit:e}){const n=e,t=$(null),r=(f,m)=>{var b,_;return((b=t.value)==null?void 0:b.value)===f&&((_=t.value)==null?void 0:_.label)===m},c=(f,m,b)=>{t.value={value:m,label:b},n("updateSound",m,f,b),setTimeout(()=>{var _,d;((_=t.value)==null?void 0:_.value)===m&&((d=t.value)==null?void 0:d.label)===b&&(t.value=null)},1e3)},g=(f,m,b)=>{const _=f.target.value;t.value={value:m,label:b},n("updateColor",m,_,b),setTimeout(()=>{var d,l;((d=t.value)==null?void 0:d.value)===m&&((l=t.value)==null?void 0:l.label)===b&&(t.value=null)},1e3)},w=(f,m,b)=>{const _=f.target.value;t.value={value:m,label:b},n("updateBgColor",m,_,b),setTimeout(()=>{var d,l;((d=t.value)==null?void 0:d.value)===m&&((l=t.value)==null?void 0:l.label)===b&&(t.value=null)},1e3)};return(f,m)=>{const b=V("a-switch"),_=V("a-input");return C(),I("div",gl,[(C(!0),I(le,null,te(f.checkedList,d=>(C(),I("div",{key:`${d.value}-${d.label}`,class:me(["settings-item",{active:r(d.value,d.label)}])},[y("div",yl,[(C(),q(ee(v(ge)(d.value)))),O(" "+j(d.label)+"设置： ",1)]),y("div",_l,[y("div",kl,[s(b,{checked:d.soundEnabled,"onUpdate:checked":l=>d.soundEnabled=l,size:"small",onChange:l=>c(l,d.value,d.label)},null,8,["checked","onUpdate:checked","onChange"]),y("span",hl,j(d.soundEnabled?"音效开启":"音效关闭"),1)]),y("div",Cl,[y("div",wl,[m[0]||(m[0]=y("span",{class:"color-label"},"边框/文字颜色：",-1)),s(_,{class:"color-input",type:"color",value:d.color||"#ff0000",onChange:l=>g(l,d.value,d.label)},null,8,["value","onChange"])]),y("div",Sl,[m[1]||(m[1]=y("span",{class:"color-label"},"背景颜色：",-1)),s(_,{class:"color-input",type:"color",value:d.bgColor||"#ffffff",onChange:l=>w(l,d.value,d.label)},null,8,["value","onChange"])])])])],2))),128))])}}});function M(u,e){return`${u}|${e}`}function Ll(u,e,n){const t=W({indeterminate:!1,checkAll:!1,checkedList:[]}),r=W(Object.fromEntries(u.map(a=>[M(a.value,a.label),!0]))),c=W(Object.fromEntries(u.map(a=>[M(a.value,a.label),"#ff0000"]))),g=W(Object.fromEntries(u.map(a=>[M(a.value,a.label),"#ffffff"]))),w=K(()=>t.checkedList.every(a=>a.soundEnabled)),f=()=>{const a=t.checkedList.length;t.checkAll=a===u.length,t.indeterminate=a>0&&a<u.length},m=(a,o,k)=>{const E=M(a,k);c[E]=o;const S=t.checkedList.findIndex(U=>U.value===a&&U.label===k);S!==-1&&(t.checkedList[S].color=o,t.checkedList[S].bgColor=g[E]),n("update:modelValue",t.checkedList)},b=(a,o,k)=>{const E=M(a,k);g[E]=o;const S=t.checkedList.findIndex(U=>U.value===a&&U.label===k);if(S!==-1){const U={...t.checkedList[S],bgColor:o};t.checkedList.splice(S,1,U)}n("update:modelValue",[...t.checkedList])},_=(a,o,k)=>{const E=M(a,k);r[E]=o;const S=t.checkedList.findIndex(U=>U.value===a&&U.label===k);S!==-1&&(t.checkedList[S].soundEnabled=o),n("update:modelValue",t.checkedList)},d=(a,o,k)=>{const E=M(o,k);a?t.checkedList.some(S=>S.value===o&&S.label===k)||t.checkedList.push({value:o,label:k,soundEnabled:r[E],color:c[E],bgColor:g[E]}):t.checkedList=t.checkedList.filter(S=>!(S.value===o&&S.label===k)),f(),n("update:modelValue",t.checkedList)},l=a=>{a?t.checkedList=u.map(o=>{const k=M(o.value,o.label);return{value:o.value,label:o.label,soundEnabled:r[k],color:c[k],bgColor:g[k]}}):t.checkedList=[],f(),n("update:modelValue",t.checkedList)},p=a=>{t.checkedList.forEach(o=>{const k=M(o.value,o.label);o.soundEnabled=a,r[k]=a}),n("update:modelValue",t.checkedList)};return ve(()=>e,a=>{t.checkedList=a?[...a]:[],a&&a.forEach(o=>{const k=M(o.value,o.label);o.color&&(c[k]=o.color),o.bgColor&&(g[k]=o.bgColor)}),f()},{immediate:!0,deep:!0}),{state:t,soundEnabledMap:r,colorMap:c,bgColorMap:g,allSoundsEnabled:w,updateColor:m,updateBgColor:b,updateSound:_,handleCheckboxChange:d,onCheckAllChange:l,toggleAllSounds:p}}const $l={class:"filter-section"},El={class:"filter-content"},Ol=T({__name:"index",props:{type:{},title:{},options:{},modelValue:{}},emits:["update:modelValue"],setup(u,{emit:e}){const n=u,t=e,{state:r,allSoundsEnabled:c,updateColor:g,updateBgColor:w,updateSound:f,handleCheckboxChange:m,onCheckAllChange:b,toggleAllSounds:_}=Ll(n.options,n.modelValue,t);return(d,l)=>(C(),I("div",$l,[y("div",El,[s(ml,{type:d.type,title:d.title,"check-all":v(r).checkAll,indeterminate:v(r).indeterminate,"all-sounds-enabled":v(c),onCheckAllChange:v(b),onToggleAllSounds:v(_)},null,8,["type","title","check-all","indeterminate","all-sounds-enabled","onCheckAllChange","onToggleAllSounds"]),l[3]||(l[3]=y("div",{class:"filter-divider"},null,-1)),s(bl,{options:d.options,"checked-list":v(r).checkedList,onChange:v(m)},null,8,["options","checked-list","onChange"]),l[4]||(l[4]=y("div",{class:"filter-divider"},null,-1)),s(Vl,{"checked-list":v(r).checkedList,options:d.options,onUpdateSound:l[0]||(l[0]=(p,a,o)=>v(f)(p,a,o)),onUpdateColor:l[1]||(l[1]=(p,a,o)=>v(g)(p,a,o)),onUpdateBgColor:l[2]||(l[2]=(p,a,o)=>v(w)(p,a,o))},null,8,["checked-list","options"])])]))}}),x=T({__name:"BaseFilterContainer",props:{type:{},title:{},options:{},modelValue:{}},emits:["update:modelValue"],setup(u){return(e,n)=>(C(),q(Ol,{type:e.type,title:e.title,options:e.options,modelValue:e.modelValue,"onUpdate:modelValue":n[0]||(n[0]=t=>e.$emit("update:modelValue",t))},null,8,["type","title","options","modelValue"]))}}),B={currency:"通货",equipment:"地图",flask:"药剂",jewel:"珠宝",normalequipment:"普通装备",skillgem:"技能宝石",unique:"传奇物品"},ye=[{label:"混沌石",value:"Chaos Orb"},{label:"卡兰德的魔镜",value:"Mirror of Kalandra"},{label:"点金石",value:"Orb of Alchemy"},{label:"机会石",value:"Orb of Chance"},{label:"崇高石",value:"Exalted Orb"},{label:"富豪石",value:"Regal Orb"},{label:"神圣石",value:"Divine Orb"},{label:"剥离石",value:"Orb of Annulment"},{label:"瓦尔宝珠",value:"Vaal Orb"}],ql=T({__name:"CurrencyFilterContainer",props:{modelValue:{}},emits:["update:modelValue"],setup(u){return(e,n)=>(C(),q(x,{type:"currency",title:v(B).currency,options:v(ye),modelValue:e.modelValue,"onUpdate:modelValue":n[0]||(n[0]=t=>e.$emit("update:modelValue",t))},null,8,["title","options","modelValue"]))}}),X=[{label:"Lv1",value:"Waystone (Tier 1)"},{label:"Lv2",value:"Waystone (Tier 2)"},{label:"Lv3",value:"Waystone (Tier 3)"},{label:"Lv4",value:"Waystone (Tier 4)"},{label:"Lv5",value:"Waystone (Tier 5)"},{label:"Lv6",value:"Waystone (Tier 6)"},{label:"Lv7",value:"Waystone (Tier 7)"},{label:"Lv8",value:"Waystone (Tier 8)"},{label:"Lv9",value:"Waystone (Tier 9)"},{label:"Lv10",value:"Waystone (Tier 10)"},{label:"Lv11",value:"Waystone (Tier 11)"},{label:"Lv12",value:"Waystone (Tier 12)"},{label:"Lv13",value:"Waystone (Tier 13)"},{label:"Lv14",value:"Waystone (Tier 14)"},{label:"Lv15",value:"Waystone (Tier 15)"},{label:"Lv16",value:"Waystone (Tier 16)"}],Fl=T({__name:"EquipmentFilterContainer",props:{modelValue:{}},emits:["update:modelValue"],setup(u){return(e,n)=>(C(),q(x,{type:"equipment",title:v(B).equipment,options:v(X),modelValue:e.modelValue,"onUpdate:modelValue":n[0]||(n[0]=t=>e.$emit("update:modelValue",t))},null,8,["title","options","modelValue"]))}}),_e=[{label:"深渊珠宝",value:"Abyss Jewel"},{label:"普通珠宝",value:"Normal Jewel"},{label:"星团珠宝",value:"Cluster Jewel"},{label:"幻灭珠宝",value:"Megalomaniac"},{label:"守望之眼",value:"Watcher's Eye"},{label:"超自然珠宝",value:"Transcendent Jewel"},{label:"永恒珠宝",value:"Timeless Jewel"},{label:"变相珠宝",value:"Metamorphic Jewel"}],Tl=T({__name:"JewelFilterContainer",props:{modelValue:{}},emits:["update:modelValue"],setup(u){return(e,n)=>(C(),q(x,{type:"jewel",title:v(B).jewel,options:v(_e),modelValue:e.modelValue,"onUpdate:modelValue":n[0]||(n[0]=t=>e.$emit("update:modelValue",t))},null,8,["title","options","modelValue"]))}}),ke=[{label:"生命药剂",value:"Life Flask"},{label:"魔力药剂",value:"Mana Flask"},{label:"复合药剂",value:"Hybrid Flask"},{label:"水银药剂",value:"Quicksilver Flask"},{label:"红玉药剂",value:"Ruby Flask"},{label:"蓝玉药剂",value:"Sapphire Flask"},{label:"黄玉药剂",value:"Topaz Flask"},{label:"坚岩药剂",value:"Granite Flask"},{label:"紫晶药剂",value:"Amethyst Flask"},{label:"石英药剂",value:"Quartz Flask"},{label:"玄武岩药剂",value:"Basalt Flask"},{label:"祝福药剂",value:"Divine Flask"}],Ul=T({__name:"FlaskFilterContainer",props:{modelValue:{}},emits:["update:modelValue"],setup(u){return(e,n)=>(C(),q(x,{type:"flask",title:v(B).flask,options:v(ke),modelValue:e.modelValue,"onUpdate:modelValue":n[0]||(n[0]=t=>e.$emit("update:modelValue",t))},null,8,["title","options","modelValue"]))}}),he=[{label:"1-14技能石",value:"Uncut Skill Gem",tap:"<= 14"},{label:"15-20技能石",value:"Uncut Skill Gem",tap:">= 15"},{label:"19-20技能石",value:"Uncut Skill Gem",tap:">= 19"},{label:"1级辅助宝石",value:"Uncut Support Gem",tap:">= 1"},{label:"2级辅助宝石",value:"Uncut Support Gem",tap:">= 2"},{label:"3级辅助宝石",value:"Uncut Support Gem",tap:">= 3"},{label:"1-18精魄石",value:"Uncut Spirit Gem",tap:"<= 18"},{label:"19-20精魄石",value:"Uncut Spirit Gem",tap:">= 19"}],Al=T({__name:"SkillGemFilterContainer",props:{modelValue:{}},emits:["update:modelValue"],setup(u){return(e,n)=>(C(),q(x,{type:"skillgem",title:v(B).skillgem,options:v(he),modelValue:e.modelValue,"onUpdate:modelValue":n[0]||(n[0]=t=>e.$emit("update:modelValue",t))},null,8,["title","options","modelValue"]))}}),Ce=[{label:"任意传奇装备",value:"Any Unique"},{label:"传奇武器",value:"Unique Weapon"},{label:"传奇护甲",value:"Unique Armour"},{label:"传奇饰品",value:"Unique Accessory"},{label:"传奇腰带",value:"Unique Belt"},{label:"传奇戒指",value:"Unique Ring"},{label:"传奇项链",value:"Unique Amulet"},{label:"传奇箭袋",value:"Unique Quiver"},{label:"六连传奇",value:"6-Linked Unique"},{label:"高价传奇",value:"Valuable Unique"}],jl=T({__name:"UniqueFilterContainer",props:{modelValue:{}},emits:["update:modelValue"],setup(u){return(e,n)=>(C(),q(x,{type:"unique",title:v(B).unique,options:v(Ce),modelValue:e.modelValue,"onUpdate:modelValue":n[0]||(n[0]=t=>e.$emit("update:modelValue",t))},null,8,["title","options","modelValue"]))}}),Il=T({__name:"NormalEquipmentFilterContainer",props:{modelValue:{}},emits:["update:modelValue"],setup(u){return(e,n)=>(C(),q(x,{type:"normalequipment",title:v(B).normalequipment,options:v(X),modelValue:e.modelValue,"onUpdate:modelValue":n[0]||(n[0]=t=>e.$emit("update:modelValue",t))},null,8,["title","options","modelValue"]))}}),Ml={class:"panel-header"},Rl={class:"panel-header"},Dl={class:"panel-header"},xl={class:"panel-header"},Bl={class:"panel-header"},Hl={class:"panel-header"},Pl={class:"panel-header"},Gl=T({__name:"FilterPanels",setup(u,{expose:e}){const n=$(["1","2","3","4","5","6","7"]),t=$([]),r=$([]),c=$([]),g=$([]),w=$([]),f=$([]),m=$([]),b=()=>({version:"1.0.0",lastModified:new Date().toISOString(),filters:{currency:{enabled:!0,items:t.value},equipment:{enabled:!0,items:r.value},jewel:{enabled:!0,items:c.value},flask:{enabled:!0,items:g.value},skillgem:{enabled:!0,items:w.value},unique:{enabled:!0,items:f.value},normalequipment:{enabled:!0,items:m.value}}}),_=d=>{var p,a,o,k,E,S,U;const{filters:l}=d;(p=l.currency)!=null&&p.enabled&&(t.value=l.currency.items),(a=l.equipment)!=null&&a.enabled&&(r.value=l.equipment.items),(o=l.jewel)!=null&&o.enabled&&(c.value=l.jewel.items),(k=l.flask)!=null&&k.enabled&&(g.value=l.flask.items),(E=l.skillgem)!=null&&E.enabled&&(w.value=l.skillgem.items),(S=l.unique)!=null&&S.enabled&&(f.value=l.unique.items),(U=l.normalequipment)!=null&&U.enabled&&(m.value=l.normalequipment.items)};return ve([t,r,c,g,w,f,m],()=>{},{deep:!0}),e({currencyCheckedList:t,equipmentCheckedList:r,jewelCheckedList:c,flaskCheckedList:g,skillGemCheckedList:w,uniqueCheckedList:f,normalEquipmentCheckedList:m,getCurrentConfig:b,applyConfig:_}),(d,l)=>{const p=V("a-collapse-panel"),a=V("a-collapse");return C(),q(a,{activeKey:n.value,"onUpdate:activeKey":l[7]||(l[7]=o=>n.value=o)},{default:i(()=>[s(p,{key:"1"},{header:i(()=>[y("span",Ml,[s(v(re),{class:"panel-icon currency-icon"}),l[8]||(l[8]=O(" 通货 "))])]),default:i(()=>[s(ql,{modelValue:t.value,"onUpdate:modelValue":l[0]||(l[0]=o=>t.value=o)},null,8,["modelValue"])]),_:1}),s(p,{key:"2"},{header:i(()=>[y("span",Rl,[s(v(se),{class:"panel-icon equipment-icon"}),l[9]||(l[9]=O(" 地图 "))])]),default:i(()=>[s(Fl,{modelValue:r.value,"onUpdate:modelValue":l[1]||(l[1]=o=>r.value=o)},null,8,["modelValue"])]),_:1}),s(p,{key:"3"},{header:i(()=>[y("span",Dl,[s(v(ae),{class:"panel-icon jewel-icon"}),l[10]||(l[10]=O(" 珠宝 "))])]),default:i(()=>[s(Tl,{modelValue:c.value,"onUpdate:modelValue":l[2]||(l[2]=o=>c.value=o)},null,8,["modelValue"])]),_:1}),s(p,{key:"4"},{header:i(()=>[y("span",xl,[s(v(oe),{class:"panel-icon flask-icon"}),l[11]||(l[11]=O(" 药剂 "))])]),default:i(()=>[s(Ul,{modelValue:g.value,"onUpdate:modelValue":l[3]||(l[3]=o=>g.value=o)},null,8,["modelValue"])]),_:1}),s(p,{key:"5"},{header:i(()=>[y("span",Bl,[s(v(ne),{class:"panel-icon skill-icon"}),l[12]||(l[12]=O(" 技能石 "))])]),default:i(()=>[s(Al,{modelValue:w.value,"onUpdate:modelValue":l[4]||(l[4]=o=>w.value=o)},null,8,["modelValue"])]),_:1}),s(p,{key:"6"},{header:i(()=>[y("span",Hl,[s(v(fe),{class:"panel-icon unique-icon"}),l[13]||(l[13]=O(" 传奇装备 "))])]),default:i(()=>[s(jl,{modelValue:f.value,"onUpdate:modelValue":l[5]||(l[5]=o=>f.value=o)},null,8,["modelValue"])]),_:1}),s(p,{key:"7"},{header:i(()=>[y("span",Pl,[s(v(Q),{class:"panel-icon normal-icon"}),l[14]||(l[14]=O(" 装备 "))])]),default:i(()=>[s(Il,{modelValue:m.value,"onUpdate:modelValue":l[6]||(l[6]=o=>m.value=o)},null,8,["modelValue"])]),_:1})]),_:1},8,["activeKey"])}}}),Nl=T({__name:"PreviewModal",props:{visible:{type:Boolean},content:{}},emits:["update:visible"],setup(u,{emit:e}){const n=e,t=()=>{n("update:visible",!1)},r=c=>{n("update:visible",c)};return(c,g)=>{const w=V("a-textarea"),f=V("a-button"),m=V("a-modal");return C(),q(m,{open:c.visible,title:"过滤器预览",width:"800px",onCancel:t,"onUpdate:open":r},{footer:i(()=>[s(f,{onClick:t},{default:i(()=>g[0]||(g[0]=[O("关闭")])),_:1})]),default:i(()=>[s(w,{value:c.content,rows:20,readonly:"",placeholder:"生成的过滤器内容将显示在这里..."},null,8,["value"])]),_:1},8,["open"])}}}),zl="/poe2_-dai-ju_-get-all/assets/home-BQXV97ir.png",Wl=T({__name:"DonationModal",props:{visible:{type:Boolean}},emits:["update:visible"],setup(u,{emit:e}){const n=e,t=()=>{n("update:visible",!1)},r=c=>{n("update:visible",c)};return(c,g)=>{const w=V("a-button"),f=V("a-modal");return C(),q(f,{open:c.visible,title:"赞助支持",width:"400px",onCancel:t,"onUpdate:open":r},{footer:i(()=>[s(w,{onClick:t},{default:i(()=>g[0]||(g[0]=[O("关闭")])),_:1})]),default:i(()=>[g[1]||(g[1]=y("div",{class:"donation-content"},[y("p",{class:"donation-text"}," 感谢您对我们的支持！您的每一份赞助都是我们前进的动力。 我们会继续努力，为大家提供更好的POE过滤器工具。 您的支持将帮助我们： "),y("ul",{class:"donation-list"},[y("li",null,"✨ 持续优化和更新功能"),y("li",null,"🚀 提供更稳定的服务器支持"),y("li",null,"💡 开发更多实用的工具"),y("li",null,"🌟 创造更好的用户体验")])],-1)),g[2]||(g[2]=y("img",{src:zl,alt:"赞助二维码",class:"donation-qr"},null,-1))]),_:1},8,["open"])}}}),Jl=(u,e)=>{const n=u.__vccOpts||u;for(const[t,r]of e)n[t]=r;return n},Kl=Jl(Wl,[["__scopeId","data-v-6477e88e"]]),P={CONFIG:"poe2-filter-config",TEMPLATES:"poe2-filter-templates",HISTORY:"poe2-filter-history"},Yl=10;class Ql{async saveConfig(e){try{const n={...e,lastModified:new Date().toISOString()};localStorage.setItem(P.CONFIG,JSON.stringify(n)),await this.addToHistory(n)}catch(n){throw console.error("Failed to save config:",n),new Error("配置保存失败")}}async loadConfig(){try{const e=localStorage.getItem(P.CONFIG);return e?JSON.parse(e):this.getDefaultConfig()}catch(e){throw console.error("Failed to load config:",e),new Error("配置加载失败")}}async saveTemplate(e){try{const n=await this.loadTemplates(),t=n.findIndex(r=>r.id===e.id);t>=0?n[t]=e:n.push(e),localStorage.setItem(P.TEMPLATES,JSON.stringify(n))}catch(n){throw console.error("Failed to save template:",n),new Error("模板保存失败")}}async loadTemplates(){try{const e=localStorage.getItem(P.TEMPLATES);return e?JSON.parse(e):this.getDefaultTemplates()}catch(e){throw console.error("Failed to load templates:",e),new Error("模板加载失败")}}async saveHistory(e){try{const n=await this.loadHistory();n.unshift(e),n.length>Yl&&n.pop(),localStorage.setItem(P.HISTORY,JSON.stringify(n))}catch(n){throw console.error("Failed to save history:",n),new Error("历史记录保存失败")}}async loadHistory(){try{const e=localStorage.getItem(P.HISTORY);return e?JSON.parse(e):[]}catch(e){throw console.error("Failed to load history:",e),new Error("历史记录加载失败")}}async addToHistory(e){const n={version:e.version,timestamp:new Date().toISOString(),config:e,description:"自动保存"};await this.saveHistory(n)}getDefaultConfig(){return{version:"1.0.0",filters:{currency:{enabled:!0,items:[]},equipment:{enabled:!0,items:[]},jewel:{enabled:!0,items:[]},flask:{enabled:!0,items:[]},skillgem:{enabled:!0,items:[]},unique:{enabled:!0,items:[]},normalequipment:{enabled:!0,items:[]}},metadata:{name:"默认配置",description:"新建的过滤器配置",author:"系统"}}}getDefaultTemplates(){return[{id:"basic",name:"基础过滤模板",description:"适合新手的基础过滤设置",config:{version:"1.0.0",filters:{currency:{enabled:!0,items:[{value:"chaos",label:"混沌石",soundEnabled:!0,color:"#FF7F50"},{value:"exalted",label:"崇高石",soundEnabled:!0,color:"#FFD700"}]},equipment:{enabled:!0,items:[]},jewel:{enabled:!0,items:[]},flask:{enabled:!0,items:[]},skillgem:{enabled:!0,items:[]},unique:{enabled:!0,items:[]},normalequipment:{enabled:!0,items:[]}}}},{id:"advanced",name:"进阶过滤模板",description:"包含更多高级过滤选项",config:{version:"1.0.0",filters:{currency:{enabled:!0,items:[{value:"mirror",label:"魔镜",soundEnabled:!0,color:"#FF0000"},{value:"exalted",label:"崇高石",soundEnabled:!0,color:"#FFD700"},{value:"chaos",label:"混沌石",soundEnabled:!0,color:"#FF7F50"}]},equipment:{enabled:!0,items:[]},jewel:{enabled:!0,items:[]},flask:{enabled:!0,items:[]},skillgem:{enabled:!0,items:[]},unique:{enabled:!0,items:[]},normalequipment:{enabled:!0,items:[]}}}}]}}const D=new Ql;function Xl(){const u=$(null),e=$([]),n=$([]),t=$(!1),r=async()=>{try{t.value=!0,u.value=await D.loadConfig(),e.value=await D.loadHistory(),n.value=await D.loadTemplates()}catch(l){F.error("加载配置失败"),console.error("Load config error:",l)}finally{t.value=!1}},c=async l=>{try{await D.saveConfig(l),u.value=l,F.success("配置保存成功"),e.value=await D.loadHistory()}catch(p){F.error("保存配置失败"),console.error("Save config error:",p)}},g=()=>{if(!u.value){F.error("没有可导出的配置");return}try{const l=JSON.stringify(u.value,null,2),p=new Blob([l],{type:"application/json"}),a=URL.createObjectURL(p),o=document.createElement("a");o.href=a,o.download=`poe2-filter-config-${new Date().toISOString().slice(0,10)}.json`,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(a),F.success("配置导出成功")}catch(l){F.error("配置导出失败"),console.error("Export error:",l)}},w=async l=>{try{const p=await _(l),a=JSON.parse(p),o=d(a);return o.isValid?(await c(a),!0):(F.error(`配置验证失败: ${o.errors.join(", ")}`),!1)}catch(p){return F.error("配置导入失败"),console.error("Import error:",p),!1}},f=async l=>{try{const p=n.value.find(a=>a.id===l);if(!p)throw new Error("模板不存在");await c(p.config),F.success(`已应用模板：${p.name}`)}catch(p){F.error("应用模板失败"),console.error("Apply template error:",p)}},m=async(l,p)=>{if(!u.value){F.error("没有可保存的配置");return}try{const a={id:`template-${Date.now()}`,name:l,description:p,config:u.value,createDate:new Date().toISOString()};await D.saveTemplate(a),n.value=await D.loadTemplates(),F.success("保存为模板成功")}catch(a){F.error("保存为模板失败"),console.error("Save template error:",a)}},b=async l=>{try{const p=e.value.find(a=>a.timestamp===l);if(!p)throw new Error("历史版本不存在");await c(p.config),F.success("恢复历史版本成功")}catch(p){F.error("恢复历史版本失败"),console.error("Restore history error:",p)}},_=l=>new Promise((p,a)=>{const o=new FileReader;o.onload=k=>{var E;return p((E=k.target)==null?void 0:E.result)},o.onerror=k=>a(k),o.readAsText(l)}),d=l=>{const p=[],a=[];if(l.version||p.push("缺少版本信息"),!l.filters||typeof l.filters!="object")p.push("缺少过滤器配置或格式错误");else for(const o in l.filters){const k=l.filters[o];if(!k.enabled||!Array.isArray(k.items)){p.push(`过滤器 "${o}" 格式错误`);continue}k.items.forEach((E,S)=>{(!E.value||typeof E.soundEnabled!="boolean")&&p.push(`过滤器 "${o}" 中第 ${S+1} 项格式错误`)})}return l.metadata&&typeof l.metadata!="object"&&a.push("元数据格式错误"),{isValid:p.length===0,errors:p,warnings:a}};return r(),{currentConfig:u,configHistory:e,templates:n,isLoading:t,loadConfig:r,saveConfig:c,exportConfig:g,importConfig:w,applyTemplate:f,saveAsTemplate:m,restoreHistory:b}}const Zl={class:"filter-config-manager"},et={class:"config-actions"},lt={class:"ant-upload-drag-icon"},tt={key:0,class:"preview-content"},nt={class:"template-title"},ot={class:"template-description"},at={class:"history-item"},st={class:"history-info"},rt={class:"history-time"},it={class:"history-description"},ut=T({__name:"FilterConfigManager",setup(u){const{currentConfig:e,configHistory:n,templates:t,exportConfig:r,importConfig:c,applyTemplate:g,saveAsTemplate:w,restoreHistory:f}=Xl(),m=$(!1),b=$(!1),_=$(!1),d=$(!1),l=$(""),p=$([]),a=$(!1),o=$({name:"",description:""}),k=$(!1),E=()=>{m.value=!0,l.value="",p.value=[]},S=A=>{const h=new FileReader;return h.onload=R=>{var G;try{const N=(G=R.target)==null?void 0:G.result;l.value=N}catch{F.error("文件读取失败")}},h.readAsText(A),!1},U=async()=>{if(!l.value){F.error("请先选择配置文件");return}try{a.value=!0;const A=new File([l.value],"config.json",{type:"application/json"});await c(A)&&(m.value=!1)}finally{a.value=!1}},Se=()=>{b.value=!0},Ve=()=>{o.value={name:"",description:""},_.value=!0},Le=async A=>{await g(A),b.value=!1},$e=async()=>{if(!o.value.name){F.error("请输入模板名称");return}try{k.value=!0,await w(o.value.name,o.value.description),_.value=!1}finally{k.value=!1}},Ee=()=>{d.value=!0},Oe=async A=>{await f(A),d.value=!1},Z=A=>{var h;return((h=e.value)==null?void 0:h.lastModified)===A.timestamp},qe=A=>Z(A)?"blue":"gray",ue=A=>new Date(A).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"});return(A,h)=>{const R=V("a-button"),G=V("a-button-group"),N=V("a-space"),Fe=V("a-upload-dragger"),de=V("a-textarea"),z=V("a-modal"),ce=V("a-tag"),Te=V("a-list-item-meta"),Ue=V("a-list-item"),Ae=V("a-list"),je=V("a-input"),pe=V("a-form-item"),Ie=V("a-form"),Me=V("a-timeline-item"),Re=V("a-timeline");return C(),I("div",Zl,[y("div",et,[s(N,null,{default:i(()=>[s(G,null,{default:i(()=>[s(R,{type:"primary",onClick:v(r)},{icon:i(()=>[s(v(el))]),default:i(()=>[h[8]||(h[8]=O(" 导出配置 "))]),_:1},8,["onClick"]),s(R,{type:"primary",onClick:E},{icon:i(()=>[s(v(ll))]),default:i(()=>[h[9]||(h[9]=O(" 导入配置 "))]),_:1})]),_:1}),s(G,null,{default:i(()=>[s(R,{onClick:Se},{icon:i(()=>[s(v(ie))]),default:i(()=>[h[10]||(h[10]=O(" 预设模板 "))]),_:1}),s(R,{onClick:Ve},{icon:i(()=>[s(v(tl))]),default:i(()=>[h[11]||(h[11]=O(" 保存为模板 "))]),_:1})]),_:1}),s(R,{onClick:Ee},{icon:i(()=>[s(v(nl))]),default:i(()=>[h[12]||(h[12]=O(" 历史记录 "))]),_:1})]),_:1})]),s(z,{visible:m.value,"onUpdate:visible":h[2]||(h[2]=L=>m.value=L),title:"导入配置",onOk:U,confirmLoading:a.value},{default:i(()=>[s(Fe,{fileList:p.value,"onUpdate:fileList":h[0]||(h[0]=L=>p.value=L),beforeUpload:S,showUploadList:!1},{default:i(()=>[y("p",lt,[s(v(Q))]),h[13]||(h[13]=y("p",{class:"ant-upload-text"},"点击或拖拽配置文件到此区域",-1)),h[14]||(h[14]=y("p",{class:"ant-upload-hint"},"支持.json格式的配置文件",-1))]),_:1},8,["fileList"]),l.value?(C(),I("div",tt,[h[15]||(h[15]=y("p",null,"配置预览：",-1)),s(de,{value:l.value,"onUpdate:value":h[1]||(h[1]=L=>l.value=L),rows:4,readonly:""},null,8,["value"])])):Y("",!0)]),_:1},8,["visible","confirmLoading"]),s(z,{visible:b.value,"onUpdate:visible":h[3]||(h[3]=L=>b.value=L),title:"预设模板",footer:null,width:"700px"},{default:i(()=>[s(Ae,{"data-source":v(t),class:"template-list"},{renderItem:i(({item:L})=>[s(Ue,null,{default:i(()=>[s(Te,null,{title:i(()=>[y("div",nt,[O(j(L.name)+" ",1),L.createDate?(C(),q(ce,{key:0,color:"blue"},{default:i(()=>[O(j(ue(L.createDate)),1)]),_:2},1024)):Y("",!0)])]),description:i(()=>[y("div",ot,j(L.description),1)]),_:2},1024),s(R,{type:"primary",onClick:De=>Le(L.id)},{default:i(()=>h[16]||(h[16]=[O(" 应用模板 ")])),_:2},1032,["onClick"])]),_:2},1024)]),_:1},8,["data-source"])]),_:1},8,["visible"]),s(z,{visible:_.value,"onUpdate:visible":h[6]||(h[6]=L=>_.value=L),title:"保存为模板",onOk:$e,confirmLoading:k.value},{default:i(()=>[s(Ie,{model:o.value,layout:"vertical"},{default:i(()=>[s(pe,{label:"模板名称",required:""},{default:i(()=>[s(je,{value:o.value.name,"onUpdate:value":h[4]||(h[4]=L=>o.value.name=L),placeholder:"请输入模板名称"},null,8,["value"])]),_:1}),s(pe,{label:"模板描述"},{default:i(()=>[s(de,{value:o.value.description,"onUpdate:value":h[5]||(h[5]=L=>o.value.description=L),placeholder:"请输入模板描述",rows:3},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["visible","confirmLoading"]),s(z,{visible:d.value,"onUpdate:visible":h[7]||(h[7]=L=>d.value=L),title:"历史记录",footer:null,width:"700px"},{default:i(()=>[s(Re,null,{default:i(()=>[(C(!0),I(le,null,te(v(n),L=>(C(),q(Me,{key:L.timestamp,color:qe(L)},{dot:i(()=>[Z(L)?(C(),q(v(Pe),{key:0})):Y("",!0)]),default:i(()=>[y("div",at,[y("div",st,[y("span",rt,j(ue(L.timestamp)),1),s(ce,{color:"blue"},{default:i(()=>[O("v"+j(L.version),1)]),_:2},1024),y("span",it,j(L.description||"配置更新"),1)]),s(R,{type:"link",onClick:De=>Oe(L.timestamp),disabled:Z(L)},{default:i(()=>h[17]||(h[17]=[O(" 恢复此版本 ")])),_:2},1032,["onClick","disabled"])])]),_:2},1032,["color"]))),128))]),_:1})]),_:1},8,["visible"])])}}});function J(u){u=u.replace("#","");const e=parseInt(u.substring(0,2),16),n=parseInt(u.substring(2,4),16),t=parseInt(u.substring(4,6),16);return`${e} ${n} ${t}`}function H(u){const{label:e,value:n,soundEnabled:t,type:r,color:c,bgColor:g,tap:w}=u,f=r==="equipment"?"#FF0080":r==="currency"?"#FF0000":"#00FF00",m="#FFFFFF",b=J(c||f),_=J(g||m),d=(()=>{switch(r){case"currency":return{class:"Stackable Currency",icon:"Red",iconShape:"Circle",name:"通货",fontSize:60};case"equipment":return{class:"Waystones",icon:"Red",iconShape:"Hexagon",name:"地图",fontSize:45};case"jewel":return{class:"Jewel",icon:"Blue",iconShape:"Circle",name:"珠宝",fontSize:60};case"flask":return{class:"Flask",icon:"Yellow",iconShape:"Circle",name:"药剂",fontSize:60};case"skillgem":return{class:null,icon:"Orange",iconShape:"Kite",iconSize:1,name:"技能宝石",fontSize:40};case"unique":return{class:"Equipment",icon:"Brown",iconShape:"Circle",name:"传奇装备",fontSize:60};case"normalequipment":return{class:"Equipment",icon:"Green",iconShape:"Circle",name:"普通装备",fontSize:60};default:return{class:"Equipment",icon:"Green",iconShape:"Circle",name:"装备",fontSize:60}}})();let l=`Show #${d.name}-${e}
`;return r==="skillgem"&&w&&(l+=`  ItemLevel ${w}
`),d.class&&(l+=`  Class "${d.class}"
`),l+=`  BaseType "${n}"
`,l+=`  SetTextColor ${b}
`,l+=`  SetBackgroundColor ${_}
`,l+=`  SetBorderColor ${b}
`,l+=`  SetFontSize ${d.fontSize}
`,r==="equipment"?(l+=`  MinimapIcon 0 ${d.icon} ${d.iconShape}
`,l+=`  PlayEffect ${d.icon}
`,l+=`#    PlayAlertSound 4 300
`,t&&(l+=`  CustomAlertSound "音效\\高级地图.mp3" 300
`),l+="  DisableDropSound"):r==="skillgem"?(l+=`  MinimapIcon ${d.iconSize} ${d.icon} ${d.iconShape}
`,l+=`#    PlayAlertSound 15 300
`,t&&(l+=`  CustomAlertSound "音效\\宝石.mp3" 300
`),l+="  DisableDropSound"):(t?l+=`  CustomAlertSound "音效\\${e}.mp3"
`:l+=`  DisableDropSound True
  DisableAlertSound True
`,l+=`  MinimapIcon 0 ${d.icon} ${d.iconShape}
`,l+=`  PlayEffect ${d.icon}`),l}function dt(){return`# POE过滤器生成器
# 生成时间: ${new Date().toLocaleString()}

`}function ct(u){return u.map(e=>{ye.find(t=>t.value===e.value&&t.label===e.label);const n={label:e.label,value:e.value,soundEnabled:e.soundEnabled,type:"currency",color:e.color,bgColor:e.bgColor};return H(n)}).join(`

`)}function pt(u){return u.map(e=>{X.find(t=>t.value===e.value&&t.label===e.label);const n={label:e.label,value:e.value,soundEnabled:e.soundEnabled,type:"equipment",color:e.color,bgColor:e.bgColor};return H(n)}).join(`

`)}function mt(u){return u.map(e=>{_e.find(t=>t.value===e.value&&t.label===e.label);const n={label:e.label,value:e.value,soundEnabled:e.soundEnabled,type:"jewel",color:e.color,bgColor:e.bgColor};return H(n)}).join(`

`)}function vt(u){return u.map(e=>{ke.find(t=>t.value===e.value&&t.label===e.label);const n={label:e.label,value:e.value,soundEnabled:e.soundEnabled,type:"flask",color:e.color,bgColor:e.bgColor};return H(n)}).join(`

`)}function ft(u){return u.map(e=>{const n=he.find(r=>r.value===e.value&&r.label===e.label),t={label:e.label,value:e.value,soundEnabled:e.soundEnabled,type:"skillgem",color:e.color,bgColor:e.bgColor,tap:n==null?void 0:n.tap};return H(t)}).join(`

`)}function bt(u){return u.map(e=>{Ce.find(t=>t.value===e.value&&t.label===e.label);const n={label:e.label,value:e.value,soundEnabled:e.soundEnabled,type:"unique",color:e.color,bgColor:e.bgColor};return H(n)}).join(`

`)}function gt(u){return u.map(e=>{X.find(t=>t.value===e.value&&t.label===e.label);const n={label:e.label,value:e.value,soundEnabled:e.soundEnabled,type:"normalequipment",color:e.color,bgColor:e.bgColor};return H(n)}).join(`

`)}function yt(u,e,n,t,r,c,g){if(u.length===0&&e.length===0&&n.length===0&&t.length===0&&r.length===0&&c.length===0&&g.length===0)return"";const w=dt(),f=ct(u),m=pt(e),b=mt(n),_=vt(t),d=ft(r),l=bt(c),p=gt(g),a=[f,m,b,_,d,l,p].filter(o=>o.length>0);return w+a.join(`

`)}const _t=T({__name:"MainLayout",setup(u){const e=$(!1),n=$(!1),t=$(!1),r=$(!1),c=$(),g=K(()=>c.value?c.value.getCurrentConfig():{version:"1.0.0",filters:{currency:{enabled:!0,items:[]},equipment:{enabled:!0,items:[]},jewel:{enabled:!0,items:[]},flask:{enabled:!0,items:[]},skillgem:{enabled:!0,items:[]},unique:{enabled:!0,items:[]},normalequipment:{enabled:!0,items:[]}}}),w=K(()=>{if(!c.value)return"";const{currencyCheckedList:p,equipmentCheckedList:a,jewelCheckedList:o,flaskCheckedList:k,skillGemCheckedList:E,uniqueCheckedList:S,normalEquipmentCheckedList:U}=c.value;return yt(p,a,o,k,E,S,U)}),f=K(()=>{if(!c.value)return!1;const{currencyCheckedList:p,equipmentCheckedList:a,jewelCheckedList:o,flaskCheckedList:k,skillGemCheckedList:E,uniqueCheckedList:S,normalEquipmentCheckedList:U}=c.value;return p.length>0||a.length>0||o.length>0||k.length>0||E.length>0||S.length>0||U.length>0}),m=()=>{if(!f.value){F.warning("请至少选择一个过滤项");return}n.value=!0},b=()=>{t.value=!0},_=()=>{r.value=!0},d=()=>{if(!f.value){F.warning("请至少选择一个过滤项");return}const p=new Blob([w.value],{type:"text/plain"}),a=URL.createObjectURL(p),o=document.createElement("a");o.href=a,o.download=`POE_Filter_${new Date().getTime()}.filter`,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(a),F.success("过滤器导出成功")},l=p=>{if(!c.value){F.error("无法更新配置：组件未就绪");return}try{c.value.applyConfig(p),F.success("配置已更新")}catch(a){F.error("配置更新失败"),console.error("Config update error:",a)}};return(p,a)=>{const o=V("a-drawer"),k=V("a-layout-content"),E=V("a-layout");return C(),q(E,{class:"main-layout"},{default:i(()=>[s(ol,{collapsed:e.value,"onUpdate:collapsed":a[0]||(a[0]=S=>e.value=S),onShowDonation:b},null,8,["collapsed"]),s(E,null,{default:i(()=>[s(sl,{collapsed:e.value,"onUpdate:collapsed":a[1]||(a[1]=S=>e.value=S),onShowPreview:m,onExportFilter:d,onShowConfigManager:_},null,8,["collapsed"]),s(k,{class:"main-content"},{default:i(()=>[s(Gl,{ref_key:"filterPanelsRef",ref:c},null,512),s(Nl,{visible:n.value,content:w.value,"onUpdate:visible":a[2]||(a[2]=S=>n.value=S)},null,8,["visible","content"]),s(Kl,{visible:t.value,"onUpdate:visible":a[3]||(a[3]=S=>t.value=S)},null,8,["visible"]),s(o,{title:"过滤器配置管理",width:600,visible:r.value,onClose:a[4]||(a[4]=S=>r.value=!1),destroyOnClose:!1},{default:i(()=>[r.value?(C(),q(ut,{key:0,"current-config":g.value,onConfigUpdated:l},null,8,["current-config"])):Y("",!0)]),_:1},8,["visible"])]),_:1})]),_:1})]),_:1})}}}),kt=T({__name:"App",setup(u){return(e,n)=>(C(),q(_t))}}),we=Ge(kt);we.use(Ne);we.mount("#app");
